<div class="container my-5">
  <div class="row">
    <div *ngIf="(user$ | async) as user" class="col-lg-6 offset-lg-3">
      <h3 class="py-2">Adatok szerkesztése</h3>
      <form #userForm="ngForm" (ngSubmit)="onUpdate(userForm, user)">

        <div class=" mt-3">
          <div class="d-flex justify-content-between">
            <label for="">#</label>
          </div>
          <input name="id" [(ngModel)]="user._id" type="text" class="form-control" disabled required>
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">Keresztnév</label>
            <div [hidden]="userForm.controls['firstName']?.valid" class="error-message mt-1">
              <small>
                A keresztnév nagybetűvel kezdődő és 2-20 karakter hosszú lehet!
              </small>
            </div>
          </div>
          <input name="firstName" [(ngModel)]="user.firstName" type="text" class="form-control"
            pattern="^[A-ZÁÉÓÖŐÜÚŰÍ].{1,19}$" required>
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">Vezetéknév</label>
            <div [hidden]="userForm.controls['lastName']?.valid" class="error-message mt-1">
              <small>
                A vezetéknév nagybetűvel kezdődő és 2-20 karakter hosszú lehet!
              </small>
            </div>
          </div>
          <input name="lastName" [(ngModel)]="user.lastName" type="text" class="form-control"
            pattern="^[A-ZÁÉÓÖŐÜÚŰÍ].{1,19}$" required>
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">E-mail</label>
            <div [hidden]="userForm.controls['email']?.valid" class="error-message mt-1">
              <small>
                Létező e-mail címet adj meg!
              </small>
            </div>
          </div>
          <input name="email" [(ngModel)]="user.email" type="text" class="form-control"
            pattern="^[\w\.]+@([\w-]+\.)+.[\w-]{2,6}$" required>
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">Aktív</label>
          </div>
          <div class="form-check my-1">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox" name="active" [(ngModel)]="user.active">Aktív
              <span class="form-check-sign">
                <span class="check"></span>
              </span>
            </label>
          </div>
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">Jelszó</label>
            <div [hidden]="userForm.controls['password']?.valid" class="error-message mt-1">
              <small>
                A jelszó legalább 2 karakter hosszú kell legyen!
              </small>
            </div>
          </div>
          <input name="password" [(ngModel)]="user.password" type="string" class="form-control"
            pattern="^.{2,}$" required>
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">Hozzáférési token</label>
            <div [hidden]="userForm.controls['accessToken']?.valid" class="error-message mt-1">
              <small>
                A hozzáférési token legalább 6 karakter hosszú kell legyen!
              </small>
            </div>
          </div>
          <input name="accessToken" [(ngModel)]="user.accessToken" type="string" class="form-control"
            pattern="^.{6,}$">
        </div>

        <div class="form-group mt-3">
          <div class="d-flex justify-content-between">
            <label for="">Jogosultság</label>
            <div [hidden]="userForm.controls['role']?.valid" class="error-message mt-1">
              <small>
                A jogosultság legalább 1 karakter hosszú kell legyen!
              </small>
            </div>
          </div>
          <input name="role" [(ngModel)]="user.role" type="string" class="form-control"
            pattern="^.{1,}$" required>
        </div>

        <button [disabled]="userForm.invalid || clicked" type="submit" class="btn btn-success col-12 btn-lg mt-5">
          <i *ngIf="!clicked" class="fa fa-save"></i>
          <i *ngIf="clicked" class="fa fa-sync"></i>
        </button>
      </form>
    </div>
  </div>
</div>
